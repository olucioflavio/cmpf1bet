-- Create race_results table
CREATE TABLE IF NOT EXISTS race_results (
  id bigint generated by default as identity primary key,
  race_id bigint references races(id) not null unique,
  pole_driver_id bigint references drivers(id),
  p1_driver_id bigint references drivers(id),
  p2_driver_id bigint references drivers(id),
  p3_driver_id bigint references drivers(id),
  p4_driver_id bigint references drivers(id),
  p5_driver_id bigint references drivers(id),
  bortoleto_pos integer,
  variable_driver_pos integer,
  created_at timestamp with time zone default now()
);

-- Add RLS policies
ALTER TABLE race_results ENABLE row level security;

-- Everyone can view results
CREATE POLICY "Race results are viewable by everyone." ON race_results FOR SELECT USING (true);

-- Verify
SELECT * FROM race_results LIMIT 5;
